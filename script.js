// 사과

var radarData = {
  '사과': {
    lineColor: '#fd364b',
    list: [
      [
        { "axis": "탄수화물", "value": 40 },
        { "axis": "단백질", "value": 4 },
        { "axis": "칼슘", "value": 9 },
        { "axis": "인", "value": 13 },
        { "axis": "철", "value": 25 },
        { "axis": "칼륨", "value": 42 },
        { "axis": "A", "value": 1 },
        { "axis": "B1", "value": 42 },
        { "axis": "B2", "value": 21 },
        { "axis": "나이아신", "value": 33 },
        { "axis": "C", "value": 480 },
      ],
      [
        { "axis": "탄수화물", "value": 204 },
        { "axis": "단백질", "value": 4 },
        { "axis": "칼슘", "value": 6 },
        { "axis": "인", "value": 11 },
        { "axis": "철", "value": 117 },
        { "axis": "칼륨", "value": 11 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 8 },
        { "axis": "B2", "value": 7 },
        { "axis": "나이아신", "value": 0 },
        { "axis": "C", "value": 0 },
      ],
    ],
  },
  '귤': {
    lineColor: '#fbb344',
    list: [
      [
        { "axis": "탄수화물", "value": 40 },
        { "axis": "단백질", "value": 22 },
        { "axis": "칼슘", "value": 7 },
        { "axis": "인", "value": 34 },
        { "axis": "철", "value": 42 },
        { "axis": "칼륨", "value": 33 },
        { "axis": "A", "value": 213 },
        { "axis": "B1", "value": 58 },
        { "axis": "B2", "value": 100 },
        { "axis": "나이아신", "value": 40 },
        { "axis": "C", "value": 580 },
      ],
      [
        { "axis": "탄수화물", "value": 235 },
        { "axis": "단백질", "value": 18 },
        { "axis": "칼슘", "value": 24 },
        { "axis": "인", "value": 3 },
        { "axis": "철", "value": 58 },
        { "axis": "칼륨", "value": 0 },
        { "axis": "A", "value": 26 },
        { "axis": "B1", "value": 17 },
        { "axis": "B2", "value": 21 },
        { "axis": "나이아신", "value": 27 },
        { "axis": "C", "value": 10 },
      ],
    ]
  },
  '딸기': {
    lineColor: '#ec5372',
    list: [
      [
        { "axis": "탄수화물", "value": 22 },
        { "axis": "단백질", "value": 15 },
        { "axis": "칼슘", "value": 19 },
        { "axis": "인", "value": 39 },
        { "axis": "철", "value": 33 },
        { "axis": "칼륨", "value": 45 },
        { "axis": "A", "value": 3 },
        { "axis": "B1", "value": 17 },
        { "axis": "B2", "value": 14 },
        { "axis": "나이아신", "value": 20 },
        { "axis": "C", "value": 820 },
      ],
      [
        { "axis": "탄수화물", "value": 194 },
        { "axis": "단백질", "value": 7 },
        { "axis": "칼슘", "value": 10 },
        { "axis": "인", "value": 17 },
        { "axis": "철", "value": 17 },
        { "axis": "칼륨", "value": 15 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 8 },
        { "axis": "B2", "value": 7 },
        { "axis": "나이아신", "value": 7 },
        { "axis": "C", "value": 170 },
      ],
    ]
  },
  '복숭아': {
    lineColor: '#ffa4cb',
    list: [
      [
        { "axis": "탄수화물", "value": 31 },
        { "axis": "단백질", "value": 33 },
        { "axis": "칼슘", "value": 11 },
        { "axis": "인", "value": 60 },
        { "axis": "철", "value": 50 },
        { "axis": "칼륨", "value": 62 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 67 },
        { "axis": "B2", "value": 164 },
        { "axis": "나이아신", "value": 80 },
        { "axis": "C", "value": 90 },
      ],
      [
        { "axis": "탄수화물", "value": 186 },
        { "axis": "단백질", "value": 9 },
        { "axis": "칼슘", "value": 6 },
        { "axis": "인", "value": 16 },
        { "axis": "철", "value": 75 },
        { "axis": "칼륨", "value": 18 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 25 },
        { "axis": "B2", "value": 321 },
        { "axis": "나이아신", "value": 93 },
        { "axis": "C", "value": 0 },
      ],
    ]
  },
  '블루베리': {
    lineColor: '#2640b1',
    list: [
      [
        { "axis": "탄수화물", "value": 45 },
        { "axis": "단백질", "value": 13 },
        { "axis": "칼슘", "value": 9 },
        { "axis": "인", "value": 17 },
        { "axis": "철", "value": 25 },
        { "axis": "칼륨", "value": 22 },
        { "axis": "A", "value": 7 },
        { "axis": "B1", "value": 33 },
        { "axis": "B2", "value": 29 },
        { "axis": "나이아신", "value": 27 },
        { "axis": "C", "value": 100 },
      ],
      [
        { "axis": "탄수화물", "value": 135 },
        { "axis": "단백질", "value": 13 },
        { "axis": "칼슘", "value": 7 },
        { "axis": "인", "value": 0 },
        { "axis": "철", "value": 8 },
        { "axis": "칼륨", "value": 21 },
        { "axis": "A", "value": 6 },
        { "axis": "B1", "value": 25 },
        { "axis": "B2", "value": 14 },
        { "axis": "나이아신", "value": 27 },
        { "axis": "C", "value": 30 },
      ],
    ]
  },
  '감': {
    lineColor: '#ffa73d',
    list: [
      [
        { "axis": "탄수화물", "value": 42 },
        { "axis": "단백질", "value": 9 },
        { "axis": "칼슘", "value": 10 },
        { "axis": "인", "value": 20 },
        { "axis": "철", "value": 33 },
        { "axis": "칼륨", "value": 53 },
        { "axis": "A", "value": 44 },
        { "axis": "B1", "value": 58 },
        { "axis": "B2", "value": 29 },
        { "axis": "나이아신", "value": 20 },
        { "axis": "C", "value": 100 },
      ],
      [
        { "axis": "탄수화물", "value": 100 },
        { "axis": "단백질", "value": 5 },
        { "axis": "칼슘", "value": 7 },
        { "axis": "인", "value": 9 },
        { "axis": "철", "value": 58 },
        { "axis": "칼륨", "value": 35 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 33 },
        { "axis": "B2", "value": 100 },
        { "axis": "나이아신", "value": 100 },
        { "axis": "C", "value": 100 },
      ],
    ]
  },
  '살구' : {
    lineColor: '#fca48e',
    list: [
      [
        { "axis": "탄수화물", "value": 22 },
        { "axis": "단백질", "value": 16 },
        { "axis": "칼슘", "value": 7 },
        { "axis": "인", "value": 20 },
        { "axis": "철", "value": 42 },
        { "axis": "칼륨", "value": 46 },
        { "axis": "A", "value": 424 },
        { "axis": "B1", "value": 25 },
        { "axis": "B2", "value": 14 },
        { "axis": "나이아신", "value": 20 },
        { "axis": "C", "value": 50 },
      ],
      [
        { "axis": "탄수화물", "value": 206 },
        { "axis": "단백질", "value": 11 },
        { "axis": "칼슘", "value": 33 },
        { "axis": "인", "value": 36 },
        { "axis": "철", "value": 50 },
        { "axis": "칼륨", "value": 37 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 17 },
        { "axis": "B2", "value": 14 },
        { "axis": "나이아신", "value": 33 },
        { "axis": "C", "value": 0 },
      ],
    ]
  },
  '포도' : {
    lineColor: '#6c1fcd',
    list: [
      [
        { "axis": "탄수화물", "value": 53 },
        { "axis": "단백질", "value": 7 },
        { "axis": "칼슘", "value": 9 },
        { "axis": "인", "value": 30 },
        { "axis": "철", "value": 25 },
        { "axis": "칼륨", "value": 53 },
        { "axis": "A", "value": 0 },
        { "axis": "B1", "value": 58 },
        { "axis": "B2", "value": 14 },
        { "axis": "나이아신", "value": 13 },
        { "axis": "C", "value": 10 },
      ],
      [
        { "axis": "탄수화물", "value": 197 },
        { "axis": "단백질", "value": 5 },
        { "axis": "칼슘", "value": 24 },
        { "axis": "인", "value": 13 },
        { "axis": "철", "value": 58 },
        { "axis": "칼륨", "value": 13 },
        { "axis": "A", "value": 3 },
        { "axis": "B1", "value": 17 },
        { "axis": "B2", "value": 7 },
        { "axis": "나이아신", "value": 7 },
        { "axis": "C", "value": 0 },
      ],
    ]
  },
  '청포도' : {
    lineColor: '#89db2e',
    list: [
      [
        { "axis": "탄수화물", "value": 53 },
        { "axis": "단백질", "value": 7 },
        { "axis": "칼슘", "value": 9 },
        { "axis": "인", "value": 30 },
        { "axis": "철", "value": 25 },
        { "axis": "칼륨", "value": 53 },
        { "axis": "A", "value": 40 },
        { "axis": "B1", "value": 58 },
        { "axis": "B2", "value": 14 },
        { "axis": "나이아신", "value": 13 },
        { "axis": "C", "value": 10 },
      ],
      [
        { "axis": "탄수화물", "value": 197 },
        { "axis": "단백질", "value": 30 },
        { "axis": "칼슘", "value": 24 },
        { "axis": "인", "value": 13 },
        { "axis": "철", "value": 58 },
        { "axis": "칼륨", "value": 13 },
        { "axis": "A", "value": 3 },
        { "axis": "B1", "value": 17 },
        { "axis": "B2", "value": 7 },
        { "axis": "나이아신", "value": 7 },
        { "axis": "C", "value": 0 },
      ],
    ]
  },
};

function drawRadar() {
  console.log('draw!');
  var order = ['사과', '귤', '딸기', '복숭아', '블루베리','감', '살구','포도', '청포도'];

  var axis = {};
  $('.cgrid span').each(function () {
    axis[$(this).text()] = 1;
  });

  // console.log('axis :', axis);

  var cdata = $.extend(true, {}, radarData);
  for(var i=0;i<order.length;i++) {
    $('#chart-radar-'+(i+1)).html('');
    const name = order[i];
    for(var j=0;j<2;j++) {
      for(var k=0;k<cdata[name].list[j].length;k++) {
        console.log(cdata[name].list[j][k]);
        if(!(cdata[name].list[j][k].axis in axis)) {
          cdata[name].list[j].splice(k, 1);
        }
      }
    }
  }

  console.log(cdata);

  for(var i=0;i<order.length; i++) {
    const name = order[i];

    RadarChart.draw('#chart-radar-'+(i+1), cdata[name].list, {
      lineColor: cdata[name].lineColor,
    });
  };
}



$(document).ready(function () {
  drawRadar();
  drawBarGraph();
  drawPieGraph();
  drawLineGraph();

  var diff = 0, before = 0, iter = 0;
  function onScroll() {
    iter++;
    var scroll = $(document).scrollTop();

    if(iter % 3 == 0) {
      diff = scroll - before;
      if (diff < 0) {
        $('.nav').css('position', 'fixed');
      } else {
        $('.nav').css('position', 'absolute');
      }
      console.log('diff :', diff);
      before = scroll;
    }

    $('.active').removeClass("active");
    if (scroll <= 1092) {
      $('#nav-button1').addClass('active');
    } else if (scroll > 1092 && scroll <= 2580) {
      $('#nav-button2').addClass('active');
    } else if (scroll > 2580 && scroll <= 3303) {
      $('#nav-button3').addClass('active');
    } else if (scroll > 3303 && scroll <= 4074) {
      $('#nav-button4').addClass('active');
    } else if (scroll > 4074) {
      $('#nav-button5').addClass('active');
    }
  }

  $(document).on("scroll", onScroll);

  $('.button').click(function () {
    const scroll = $(this).attr('data-scroll');
    $('html, body').stop().animate({
      'scrollTop': scroll
    }, 500, 'swing', function () {
      
    });
  })

  $('.grid').click(function () {
    var iscgrid = $(this).hasClass('cgrid');
    if(iscgrid) {
      $(this).removeClass('cgrid');
    } else {
      $(this).addClass('cgrid');
    }
    drawRadar();
  });
});
